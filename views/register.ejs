<%- include('partials/head') %>

<link rel="stylesheet" href="/resources/css/register.css">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap" rel="stylesheet">
<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>


<%- include('partials/header') %>

<main class="auth-wrapper">
  <div class="login-container">
    <h2>REGISTRO</h2>
    <p class="helper">Crea tu cuenta de organizador</p>

    <form action="/register" method="POST" novalidate>
      <label for="user">Usuario</label>
      <input type="text" id="user" name="user" placeholder="Ingrese su usuario"
        value="<% if (typeof valores !== 'undefined') { %><%= valores.user %><% } %>" required />

      <label for="nombre">Nombre</label>
      <input type="text" id="nombre" name="nombre" placeholder="Ingrese su nombre"
        value="<% if (typeof valores !== 'undefined') { %><%= valores.nombre %><% } %>" required />

      <label for="password">Contraseña</label>
      <input type="password" id="password" name="password" placeholder="Ingrese su contraseña"
        value="<% if (typeof valores !== 'undefined') { %><%= valores.password %><% } %>" required />

      <button type="submit" class="cta-btn">INSCRIBIRSE</button>

      <!-- Validaciones del servidor (express-validator) -->
      <% if (typeof validaciones !== 'undefined') { %>
        <div class="validation-list" aria-live="polite">
          <% validaciones.forEach(v => { %>
            <div class="form-alert"><strong><%= v.msg %></strong></div>
          <% }) %>
        </div>
      <% } %>
    </form>
  </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<% if (typeof alert !== 'undefined' && alert) { %>
  <script>
    Swal.fire({
      title: '<b style="color:#ffffff;"><%= alertTitle %></b>',
      html: '<span style="color:#d9dcd6ff;"><%= alertMessage %></span>',
      icon: '<%= alertIcon %>',
      background: 'linear-gradient(135deg, #2f6690ff, #3a7ca5ff)', // lapis-lazuli a cerulean
      color: '#ffffff',
      iconColor: '#81c3d7ff', // sky-blue
      confirmButtonText: 'Aceptar',
      confirmButtonColor: '#16425bff', // indigo-dye
      showConfirmButton: <%= showConfirmButton %>,
      timer: <%= timer %>,
      backdrop: 'rgba(0,0,0,0.25)',
      customClass: {
        popup: 'swal2-border-rounded',
        title: 'swal2-title-custom',
        content: 'swal2-content-custom'
      }
    }).then(() => {
    window.location = '/<%= ruta %>';
    });
  </script>
<% } %>


<%- include('partials/footer') %>

